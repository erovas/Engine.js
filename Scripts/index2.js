let CanvasStack = document.querySelector('canvas-stack');

CanvasStack.onmousemove = function(e){
    let coordinates = CanvasStack.getCoordinates(e.pageX, e.pageY);
    XX.textContent = coordinates.Xs;
    YY.textContent = coordinates.Ys;
    XXl.textContent = coordinates.Xr;
    YYl.textContent = coordinates.Yr;
}

/**
 * @type {HTMLCanvasElement}
 */
let layer_0 = CanvasStack.getCanvas();      //Capa 0
let layer_1 = CanvasStack.createLayer();    //Capa 1

let ctx_0 = layer_0.getContext('2d');
let ctx_1 = layer_1.getContext('2d');

ctx_0.imageSmoothingEnabled = false;
ctx_0.mozImageSmoothingEnabled = false;
ctx_0.oImageSmoothingEnabled = false;
ctx_0.webkitImageSmoothingEnabled = false;

ctx_1.imageSmoothingEnabled = false;
ctx_1.mozImageSmoothingEnabled = false;
ctx_1.oImageSmoothingEnabled = false;
ctx_1.webkitImageSmoothingEnabled = false;

/**
 * 
 * @param {string} str 
 */
function formatear(str){
    return str.replace(/\s,/g, '0,');
}

let MapPaint = ''

MapPaint += ' 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,'
MapPaint += ' 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,'
MapPaint += ' 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8,10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9,10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8,10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9,10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8,10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9,10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8,10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,'
MapPaint += ' 0, 0, 0, 0, 0, 0, 0, 0, 8,10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,11,13, 0, 0, 0, 0, 0, 0, 8, 9, 9,10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,11,12,12,13, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8,10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,11,13, 0, 0, 0, 0, 0, 0, 8, 9, 9,10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,11,12,12,13, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8,10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,11,13, 0, 0, 0, 0, 0, 0, 8, 9, 9,10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,11,12,12,13, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8,10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,11,13, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,'
MapPaint += ' 0, 0, 0, 0, 0, 0, 0, 0,11,13, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,11,12,12,13, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,11,13, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,11,12,12,13, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,11,13, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,11,12,12,13, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,11,13, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,'
MapPaint += ' 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,26,26,26,26,26,26,26,26, 0, 0, 0,26,26,26,15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,26,26,26, 0, 0, 0, 0,26,15,15,26, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,'
MapPaint += ' 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,'
MapPaint += ' 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 3, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,'
MapPaint += ' 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 3, 3, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,25,25,25, 0, 0, 0, 0, 0, 1,'
MapPaint += ' 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,15, 0, 0, 0,26,15,26,15,26, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,26,15,26, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,26, 0, 0, 0, 0, 0,26, 0, 0, 0, 0, 0,15, 0, 0,15, 0, 0,15, 0, 0, 0, 0, 0,26, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,26,26, 0, 0, 0, 0, 0, 0, 3, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 3, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,26,26,15,26, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 3, 3, 3, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,14,26,28, 0, 0, 0, 0, 0, 1,'
MapPaint += ' 0, 0,16, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 5, 0, 0, 0, 0, 0, 0, 6, 7, 0, 0,16, 0, 0, 0, 0, 0, 0, 6, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,16, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 3, 0, 0, 3, 3, 0, 0, 0, 0,16, 0, 0, 0, 3, 3, 3, 0, 0, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 3, 3, 3, 3, 3, 3, 0, 0, 0, 0,16, 0, 0, 0, 0, 0, 0, 0,25,29,29,29,25, 0, 0, 0, 0, 1,'
MapPaint += ' 0,63,18,19, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,16, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 5, 0, 0, 0, 0, 0, 0, 0, 0, 6, 7, 0, 0, 0, 0, 0, 0, 6, 7, 0,17,18,19, 0, 0, 0, 0, 0, 6, 7, 0, 0, 0, 0, 0, 0,16, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,17,18,19, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,16, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 3, 3, 0, 0, 3, 3, 3, 0, 0,17,18,19, 0, 3, 3, 3, 3, 0, 0, 3, 3, 3, 0, 0, 0,16, 0, 4, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 5, 0, 3, 3, 3, 3, 3, 3, 3, 3, 0, 0, 0,17,18,19, 0, 0, 0, 0, 0, 0,26,26,27,26,26, 0, 0,16, 0, 1,'
MapPaint += '63,64,65,66,67, 0, 0, 0, 0, 0, 0,22,23,23,24, 0,17,18,19, 0, 0, 0, 0, 0,22,24, 0, 0, 6, 7, 0, 0, 0, 0, 0, 0, 0, 0, 6, 7, 0,22,23,24, 0, 0, 6, 7,17,18,20,21,19, 0, 0, 0, 0, 6, 7,22,23,23,24, 0,17,18,19, 0, 0, 0, 0, 0,22,24, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,22,23,24, 0, 0, 0, 0,17,18,20,21,19, 0, 0, 0, 0, 0, 0,22,23,23,24, 0,17,18,19, 0, 0, 0, 0, 0,22,24, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 3, 3, 3, 0, 0, 3, 3, 3, 3,17,18,20,21, 3, 3, 3, 3, 3, 0, 0, 3, 3, 3, 3, 0,17,18,19, 6, 7, 0, 0, 0,22,24, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 7, 3, 3, 3, 3, 3, 3, 3, 3, 3, 0, 0,17,18,20,21,19, 0, 3, 0, 0, 0,26,26,30,26,26, 0,17,18,19, 1,'
MapPaint += ' 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 0, 0, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0, 1, 1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 0, 0, 1, 1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2,'
MapPaint += ' 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 0, 0, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0, 1, 1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 0, 0, 1, 1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2'

MapPaint = MapPaint.replace(/\s/g, '');

MapPaint = MapPaint.split(',');



//212 columnas
//15 filas

let tileSet = new TileSet({
    columns: 9,
    rows: 8,
    src: 'Images/overworld.png'
});

let posX = 0;
let posY = 0
let index = 0

setTimeout(function(){

    for (let i = 0; i < 15; i++) {
        posX = 0;
        for (let j = 0; j < 212; j++) {
            tileSet.drawTile(ctx_0, MapPaint[index], posX, posY, {
                //flipH: true
            });
            posX += 16;
            index++;
        }
        posY += 16;
    }

}, 100);




let jugador = new Player({

    x:16,
    y:16,
    //width: 20,
    width: 16,
    height: 32,
    colliderbox: {
        //x: 2,
        x: 0,
        y: 2,
        //width: 20,
        width: 16,
        height: 30
        //height: 10
    },
    hitbox: {
        //x:6,
        x:2,
        y:8,
        width: 12,
        height: 24
    }
});

let keyboard = new InputKey({

    keydown: {
        ArrowUp: function(){
            jugador.action.up = true;
            //jugador.state.jumping = true;
        },

        ArrowRight: function(){
            jugador.action.right = true;
        },

        ArrowDown: function(){
            jugador.action.down = true;
        },

        ArrowLeft: function(){
            jugador.action.left = true;
        }

    },

    keyup: {
        ArrowUp: function(){
            jugador.action.up = false;
            //jugador.state.jumping = true;
        },

        ArrowRight: function(){
            jugador.action.right = false;
        },

        ArrowDown: function(){
            jugador.action.down = false;
        },

        ArrowLeft: function(){
            jugador.action.left = false;
        }
    }

});

keyboard.init();

const OFFSET = 0.001;
let tileWidth = 16;
let tileHeight = 16;
let map = [
    '0','3','3','3','3','3','3','0',
    '2','0','0','0','0','0','0','4',
    '2','0','0','0','0','0','0','4',
    '2','0','0','0','0','0','0','4',
    '2','0','0','0','0','0','0','4',
    '2','0','0','0','0','0','0','4',
    '2','0','0','4-6','A1','0','0','4',
    '0','1','1','1','1','1','1','0'
];

let columns = 8;
let rows = 8;

MLX.update = function(step){

    step = step * 0.001; // step / 1000    
    jugador.update(step, keyboard.keydown[0]);

    XX.textContent = step

    let colliderbox = jugador._colliderbox;
    let size = colliderbox.size;

    if(jugador.py < 0){
        jugador.vy = 0;
        jugador.py = 0;
    }
    else if(jugador.py + size.height > layer_0.height){
        jugador.vy = 0;
        jugador.py = layer_0.height - size.height;
    }

    if(jugador.px < 0){
        jugador.vx = 0;
        jugador.px = 0;
    }
    else if(jugador.px + size.width > layer_0.width){
        jugador.vx = 0;
        jugador.px = layer_0.width - size.width;
    }

    jugador.collideMap(map, 8, 8, tileWidth, tileHeight, OFFSET);

};

let color = ctx_1.fillStyle;


MLX.draw = function(){
    ctx_1.clearRect(0,0,layer_0.width,layer_0.height);

    //ctx.fillRect(0,0, 128, 16);
    ctx_1.fillStyle = "orange";
    ctx_1.fillRect(0,0, 128, 16);
    ctx_1.fillRect(112,16, 16, 96);
    ctx_1.fillRect(0,112, 128, 16);
    ctx_1.fillRect(0,16, 16, 96);
    
    
    ctx_1.fillStyle = "red";
    ctx_1.fillRect(48,104, 16, 2);
    ctx_1.fillRect(48,96, 2, 16);
    //ctx.fillRect(64,96, 16, 2);
    ctx_1.fillRect(64,96, 8, 2);
    ctx_1.fillRect(80,88, 16, 2);

    ctx_1.fillStyle = color;

    //jugador.draw(ctx, 'orange');
    //jugador.drawPoints(ctx, 'red');
    jugador.render(ctx_1);
    //jugador.drawEdges(ctx, 'blue');
    //jugador.drawColliderbox(ctx, 'red');
    //jugador.drawHitbox(ctx, 'yellow');

  /*  let posX = 0;
    let posY = 0
    let index = 0



    for (let i = 0; i < 15; i++) {
        for (let j = 0; j < 212; j++) {
            tileSet.drawTile(ctx_0, MapPaint[index], posX, posY);
            posX += 16;
            index++;
        }
        posY += 16;
    }

*/


}

MLX.end = function(fps, panic){
    _fps_.textContent = fps | 0;

    if(panic)
        MLX.resetFrameDelta();
}

//MLX.dev.maxFPS = 30;

MLX.start();